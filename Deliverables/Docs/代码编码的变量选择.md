你担心得很对！刚给你的代码里，**文件夹路径是“硬编码的相对路径”**（比如`INPUT_DIR = BASE_DIR / "input"`、`OUTPUT_DIR = BASE_DIR / "output"`），如果直接手动修改文件夹名称（比如把`input`改成`05_input`、`output`改成`03_output`），代码会找不到文件夹，直接报错。

核心问题是：**代码里的路径变量要和实际文件夹名称完全对应**。我需要帮你做两件事：  
1. 调整代码的路径定义，让它和“01/02/03编号的管理方案”完全匹配；  
2. 告诉你修改文件夹的“正确步骤”，确保代码和实际文件夹不脱节。


## 一、第一步：先明确“新文件夹结构+代码路径对应关系”
先把“管理方案的文件夹”和“代码里的路径变量”一一对应，避免混乱。对应表如下：

| 管理方案中的文件夹路径       | 代码里的路径变量名       | 代码里的路径定义（需要修改成这样） | 作用                     |
|------------------------------|--------------------------|------------------------------------|--------------------------|
| `brand-ocr/01_final_code/`   | `BASE_DIR`               | 代码文件本身所在的文件夹（不用改） | 存放最终脚本、配置文件   |
| `brand-ocr/01_final_code/config/` | `CONFIG_DIR`       | `BASE_DIR / "config"`              | 存放API密钥配置文件      |
| `brand-ocr/05_input/`        | `INPUT_DIR`              | `BASE_DIR.parent / "05_input"`     | 待处理图片（带编号）     |
| `brand-ocr/03_output/`       | `OUTPUT_DIR`             | `BASE_DIR.parent / "03_output"`    | 所有处理结果（带编号）   |
| `brand-ocr/03_output/processed/` | `PROCESSED_DIR`    | `OUTPUT_DIR / "processed"`         | 已处理图片（子文件夹）   |
| `brand-ocr/04_docs/`         | （代码不用读这个文件夹） | ——                                 | 存放文档（手动管理）     |
| `brand-ocr/02_process_code/` | （代码不用读这个文件夹） | ——                                 | 存放过程代码（手动管理） |

### 关键说明：
- `BASE_DIR`：代码文件（`oil_station_processor.py`）所在的文件夹（即`01_final_code`），代码会自动识别，不用改；  
- `BASE_DIR.parent`：指`01_final_code`的上级文件夹（即`brand-ocr`根目录），通过它拼接“05_input”“03_output”等带编号的文件夹，确保路径正确。


## 二、第二步：修改代码的路径定义（核心，确保不报错）
把刚给你的代码里“文件夹路径配置”部分，改成下面这样（只改路径相关的变量，其他逻辑不变）：

```python
# -------------------------- 配置参数（只改这部分路径定义！） --------------------------
# API密钥配置
API_KEY = os.getenv("TONGYI_API_KEY") or "你的API密钥"

# 1. 基础路径：代码文件所在的文件夹（01_final_code）
BASE_DIR = Path(__file__).parent
# 2. 上级路径：brand-ocr根目录（用来拼接05_input、03_output等带编号的文件夹）
ROOT_DIR = BASE_DIR.parent  # 新增这行，指向brand-ocr根目录

# 3. 带编号的文件夹路径（和管理方案完全匹配）
INPUT_DIR = ROOT_DIR / "05_input"               # 待处理图片（05开头）
OUTPUT_DIR = ROOT_DIR / "03_output"             # 处理结果（03开头）
CONFIG_DIR = BASE_DIR / "config"                # 配置文件夹（在01_final_code里）

# 4. 子文件夹路径（基于OUTPUT_DIR拼接，不用改编号）
PROCESSED_DIR = OUTPUT_DIR / "processed"
SUCCESS_DIR = PROCESSED_DIR / "success"
FAILED_DIR = PROCESSED_DIR / "failed"
TO_CONFIRM_DIR = PROCESSED_DIR / "to_confirm"
RESULTS_DIR = OUTPUT_DIR / "results"
TO_CONFIRM_TABLE_DIR = OUTPUT_DIR / "to_confirm"
INTERMEDIATE_DIR = OUTPUT_DIR / "intermediate"
RAW_JSON_DIR = INTERMEDIATE_DIR / "raw_json"

# 5. 文件路径（基于上面的文件夹拼接，不用改）
PROCESSING_LOG_PATH = INTERMEDIATE_DIR / "processing_log.csv"
FINAL_RESULTS_PATH = RESULTS_DIR / "final_results.csv"
TO_CONFIRM_SUMMARY_PATH = TO_CONFIRM_TABLE_DIR / "to_confirm_summary.csv"
API_CONFIG_PATH = CONFIG_DIR / "api_key.ini"    # 新增：API密钥配置文件路径

# 其他配置（不变）
SUPPORTED_IMAGE_FORMATS = ['.jpg', '.jpeg', '.png', '.bmp', '.gif']
RECURSIVE_READ_INPUT = True  # 穿透子文件夹
MAX_RETRIES = 2
ACCURACY_THRESHOLD = 0.9
BUSINESS_FIELDS = [
    "日期", "城市", "油站名称", "地址", "距离",
    "优惠价格", "油站价", "营销策略", "优惠信息", "是否新站"
]
REQUIRED_FIELDS = ["城市", "油站名称", "地址", "优惠价格", "油站价"]
NUMERIC_FIELDS = ["距离", "优惠价格", "油站价"]
# -----------------------------------------------------------------------------------
```

同时，修改“读取API密钥”的逻辑（从`config/api_key.ini`读取，不用硬编码），在`init_environment`函数里添加：

```python
def init_environment():
    """初始化运行环境：创建文件夹结构、初始化日志、读取API密钥"""
    # 1. 读取API密钥（从配置文件读取，不用硬编码）
    if not CONFIG_DIR.exists():
        CONFIG_DIR.mkdir(exist_ok=True)
        # 如果没有配置文件，自动创建一个模板
        with open(API_CONFIG_PATH, 'w', encoding='utf-8') as f:
            f.write("[TONGYI]\napi_key = 你的通义千问API密钥\n")
        logging.warning(f"已自动创建API配置文件，请填写密钥：{API_CONFIG_PATH}")
        raise ValueError("请先在config/api_key.ini中填写API密钥")
    
    # 读取配置文件
    config = configparser.ConfigParser()
    config.read(API_CONFIG_PATH, encoding='utf-8')
    try:
        dashscope.api_key = config.get("TONGYI", "api_key").strip()
    except:
        raise ValueError(f"API配置文件格式错误，请按模板填写：{API_CONFIG_PATH}")
    
    if not dashscope.api_key or dashscope.api_key == "你的通义千问API密钥":
        raise ValueError(f"请在{API_CONFIG_PATH}中填写有效的API密钥")
    
    # 2. 创建所有必要的文件夹（带编号的文件夹会自动创建）
    folders = [
        INPUT_DIR, OUTPUT_DIR, PROCESSED_DIR, SUCCESS_DIR,
        FAILED_DIR, TO_CONFIRM_DIR, RESULTS_DIR, TO_CONFIRM_TABLE_DIR,
        INTERMEDIATE_DIR, RAW_JSON_DIR
    ]
    for folder in folders:
        folder.mkdir(parents=True, exist_ok=True)
    
    # 3. 初始化日志（不变）
    logging.basicConfig(
        level=logging.INFO,
        format="%(asctime)s - %(levelname)s - %(message)s",
        handlers=[
            logging.FileHandler(INTERMEDIATE_DIR / f"processor_{datetime.now().strftime('%Y%m%d')}.log", encoding='utf-8'),
            logging.StreamHandler()
        ]
    )
    
    # 4. 初始化日志和结果文件（不变）
    init_log_file()
    init_result_files()
    
    logging.info("环境初始化完成")
```


## 三、第三步：手动创建带编号的文件夹（按管理方案）
修改完代码后，你需要在`brand-ocr`根目录下，手动创建以下文件夹（代码会自动补全子文件夹，比如`03_output/processed`）：

```
brand-ocr/  # 你的项目根目录
├─ 01_final_code/          # 放修改后的代码文件
│  ├─ oil_station_processor.py  # 改好路径的最终脚本
│  └─ config/              # 代码会自动创建，或手动创建
│     └─ api_key.ini       # 代码会自动创建模板，你填API密钥
├─ 02_process_code/        # 手动创建，放之前的测试代码
├─ 03_output/              # 手动创建，代码会自动生成子文件夹
├─ 04_docs/                # 手动创建，放3个核心文档
│  ├─ 01_requirement_doc.md
│  ├─ 02_user_manual.md
│  └─ 03_version_log.md
└─ 05_input/               # 手动创建，放待处理图片（可建子文件夹）
```


## 四、总结：修改文件夹名称不影响代码的关键
核心原则：**代码里的路径变量要和实际文件夹名称完全一致**。只要按以下步骤操作，就不会有任何影响：

1. 先修改代码里的`INPUT_DIR`/`OUTPUT_DIR`等路径变量，让它指向带编号的文件夹（比如`ROOT_DIR / "05_input"`）；  
2. 再在`brand-ocr`根目录下，手动创建和代码路径匹配的带编号文件夹（`01_final_code`/`02_process_code`/`03_output`/`04_docs`/`05_input`）；  
3. 后续如果再改文件夹名称（比如把`05_input`改成`05_input_2025`），**必须同步修改代码里对应的路径变量**（把`INPUT_DIR = ROOT_DIR / "05_input"`改成`INPUT_DIR = ROOT_DIR / "05_input_2025"`）。

这样一来，既实现了“01/02/03编号的管理方案”，又确保代码能正确找到所有文件夹，不会报错。后续维护时，只要看代码里的路径变量，就知道实际文件夹在哪，完全不用担心“路径不匹配”的问题。