[couchdb]
; 单节点模式
single_node=true

[chttpd]
; 允许所有来源访问（Tailscale内网安全）
enable_cors = true
; 最大请求体大小（100MB，支持大文件同步）
max_http_request_size = 104857600

[cors]
; CORS配置 - 允许Obsidian LiveSync访问
origins = *
credentials = true
methods = GET, PUT, POST, HEAD, DELETE
headers = accept, authorization, content-type, origin, referer, x-requested-with

[httpd]
; 绑定所有网络接口
bind_address = 0.0.0.0
; 启用X-Forwarded-For头部（如果使用反向代理）
enable_xframe_options = false

[couch_httpd_auth]
; 会话超时时间（7天）
timeout = 604800
; 允许持久化cookie
allow_persistent_cookies = true

[log]
; 日志级别：error, warning, notice, info, debug
level = info
; 日志文件路径
file = /opt/couchdb/var/log/couchdb.log

[replicator]
; 允许复制器自动重试
max_replication_retry_count = 10